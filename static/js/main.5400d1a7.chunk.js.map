{"version":3,"sources":["components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","components/Layout/Layout.module.css","components/ImageGallery/ImageGallery.module.css","components/Spinner/Spinner.module.css","components/Layout/Layout.js","components/Searchbar/Searchbar.js","images/No_Image-512.webp","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Spinner/Spinner.js","services/pixabay-api.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Layout","children","className","s","layout","Searchbar","state","query","handleQueryChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","this","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","name","onChange","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","webformatURL","tags","clickOnItem","src","Img","alt","onClick","ImageGalleryItemImage","defaultProps","Button","onIncrement","ButtonSection","Spinner","Loader","color","height","width","timeout","api","fetchImg","page","perPage","fetch","then","response","json","modalRoot","document","querySelector","Modal","isLoading","handleKeyDown","e","code","onClose","handleBackdropClick","target","onLoad","window","addEventListener","removeEventListener","image","createPortal","Overlay","SpinnerCentered","ImageGallery","items","total","loading","showModal","largeImage","pixabayAPI","prevState","hits","catch","message","finally","scrollTo","top","documentElement","scrollHeight","behavior","toggleModal","handleButtonClick","handleGalleryItemClick","prevProps","numberOfPages","length","map","index","largeImageURL","App","handleFormSubmit","ReactDOM","render"],"mappings":"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","file":"static/js/main.5400d1a7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__QPMq8\",\"Modal\":\"Modal_Modal__7cTNV\",\"SpinnerCentered\":\"Modal_SpinnerCentered__Ee_SN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3KXnr\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__1jKes\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2_4SF\",\"ButtonSection\":\"Button_ButtonSection__2yWnx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"Layout_layout__1Rvny\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2W8eU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Spinner_Loader__3Lefh\"};","import React from 'react';\nimport s from './Layout.module.css';\n\nconst Layout = ({ children }) =>\n    <div className={s.layout}>{children}</div>;\n\nexport default Layout;","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\nimport s from './Searchbar.module.css';\n\n\nexport default class Searchbar extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func,\n  };\n  \n  state = {\n    query: '',\n  };\n\n  handleQueryChange = event => {\n    this.setState({ query: event.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    if (this.state.query.trim() === '') {\n      toast.error(\"Введите что-то.\");\n      return;\n    }\n\n    this.props.onSubmit(this.state.query);\n    this.setState({ query: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form onSubmit={this.handleSubmit} className={s.SearchForm}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.SearchFormButtonLabel}>Search</span>\n            </button>\n\n              <input\n                 className={s.SearchFormInput}\n                 type=\"text\"\n                 name=\"query\"\n                 value={this.state.query}\n                 onChange={this.handleQueryChange}\n                 autoComplete=\"off\"\n                 autoFocus\n                 placeholder=\"Search pictures from Pixabay...\"\n              />\n           </form>\n      </header>\n    );\n  }\n}\n","export default __webpack_public_path__ + \"static/media/No_Image-512.6bca87e4.webp\";","import s from './ImageGalleryItem.module.css';\nimport PropTypes from 'prop-types';\nimport Img from '../../images/No_Image-512.webp';\n\nconst ImageGalleryItem = ({ webformatURL, tags, clickOnItem }) => (\n    <div className={s.ImageGalleryItem}>\n        <img\n            src={webformatURL ?  webformatURL : Img}\n            alt={tags}\n            onClick={clickOnItem}\n            className={s.ImageGalleryItemImage} />\n    </div>\n)\n\nImageGalleryItem.defaultProps = {\n  webformatURL: Img,\n};\n\nImageGalleryItem.propTypes = {\n    webformatURL: PropTypes.string,\n    tags: PropTypes.string.isRequired,\n    clickOnItem: PropTypes.func,\n};\n\nexport default ImageGalleryItem;","import s from './Button.module.css';\nimport PropTypes from 'prop-types';\n\nconst Button = ({ onIncrement }) => (\n    <div className={s.ButtonSection}>\n        <button type=\"button\" onClick={onIncrement} className={s.Button}>Load more</button>\n    </div>\n)\n\nButton.propTypes = {\n    onIncrement: PropTypes.func,\n};\n\nexport default Button;","import React from 'react';\nimport Loader from 'react-loader-spinner';\nimport s from './Spinner.module.css';\n\nconst Spinner = () => (\n     <div className={s.Loader}>\n        <Loader\n            type=\"ThreeDots\"\n            color=\"#3f51b5\"\n            height={80}\n            width={80}\n            timeout={3000}\n        />\n     </div>\n);\n\nexport default Spinner;","function fetchImg(query, page, perPage) {\n  const BASE_URL = 'https://pixabay.com/api';\n  const KEY = '17935593-e396bfe1aec92e4aa57ec3c04';\n\n  return fetch(`${BASE_URL}/?q=${query}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=${perPage}`)\n    .then(response => response.json())\n}\n\nconst api = {\n  fetchImg,\n};\n\nexport default api;","import React, { Component } from 'react';\nimport s from './Modal.module.css';\nimport { createPortal } from 'react-dom';\nimport PropTypes from \"prop-types\";\nimport Spinner from '../Spinner/Spinner';\nimport Img from '../../images/No_Image-512.webp';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n    static propTypes = {\n        image: PropTypes.object,\n        onClose: PropTypes.func,\n    };\n\n    state = {   \n        isLoading: true,\n    }; \n\n    componentDidMount() {\n        window.addEventListener('keydown', this.handleKeyDown);\n    }\n\n    componentWillUnmount(){\n        window.removeEventListener('keydown', this.handleKeyDown);\n    }\n\n    handleKeyDown = e => {\n    if (e.code === 'Escape') {\n        this.props.onClose();\n        }\n    }\n\n    handleBackdropClick = e => {\n        if (e.currentTarget === e.target) {\n            this.props.onClose();\n        }\n    }\n    onLoad = () => {\n        this.setState({ isLoading: false });\n    }\n\n    render() {\n        const { src, alt } = this.props.image;\n        const { isLoading } = this.state;\n        \n        return createPortal(\n            <>\n            <div className={s.Overlay} onClick={this.handleBackdropClick}>\n                <div className={s.Modal}>\n                         \n                        {isLoading && (\n                            <div className={s.SpinnerCentered}>\n                                <Spinner />\n                            </div>)}\n                        \n                    <img\n                        onLoad={this.onLoad}\n                        src={src ? src : Img}\n                        alt={alt} />\n                </div>\n            </div>\n            </>,\n            modalRoot);\n    }\n}\n","import { Component } from 'react';\nimport s from './ImageGallery.module.css';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\nimport Button from '../Button/Button';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport Spinner from '../Spinner/Spinner';\nimport pixabayAPI from '../../services/pixabay-api';\nimport Modal from '../Modal/Modal';\n\nconst perPage = 12;\n\nexport default class ImageGallery extends Component {\n    static propTypes = {\n    query: PropTypes.string.isRequired,\n    };\n    \n    state = {\n        items: [],\n        total: null,\n        error: null,\n        loading: false,\n        page: 1,\n        showModal: false,\n\n        largeImage: {\n            src: \"\",\n            alt: \"\",\n        },\n    };\n    \n    async componentDidUpdate(prevProps) {\n        if (prevProps.query !== this.props.query ) {\n            await this.setState({ items: [], page: 1 });\n            this.fetch(this.props.query);\n       }\n    }\n  \n   \n\n    fetch = (query) => {\n        this.setState({ loading: true });\n\n        pixabayAPI\n            .fetchImg(query, this.state.page, perPage)\n            .then((items) => {\n                if (items.total === 0) {\n                    toast.error(`${query} is not found. Try another one!`);\n                } else if (this.state.page === 1) {\n                    toast.error(`${items.total} pictures is found.`)\n                }\n                this.setState(prevState => ({\n                    items: [...prevState.items, ...items.hits],\n                    total: items.total,\n                    page: prevState.page + 1,\n                }))\n            })\n            .catch(error => {\n                 toast.error(error.message);\n                 this.setState({ error: error.message });\n            })\n         .finally(() => {\n             this.setState({ loading: false });\n             window.scrollTo({\n                 top: document.documentElement.scrollHeight,\n                 behavior: 'smooth',\n            });\n         });\n    }\n    \n    toggleModal = () => {\n        this.setState(({showModal}) => ({\n            showModal: !showModal\n        }))\n    }\n\n    handleButtonClick = () => {\n        this.fetch(this.props.query);\n    }\n    \n    handleGalleryItemClick = (src, alt) => {\n            this.setState({\n                largeImage: { src, alt },\n            });\n            this.toggleModal();\n    }\n\n    render() {\n        const { items, showModal, loading, largeImage, page, total } = this.state;\n        const numberOfPages = total / perPage;\n \n        return (\n        <>\n            {items.length > 0 &&\n                (<ul className={s.ImageGallery}>\n                {items.map(({ webformatURL, largeImageURL, tags }, index) => (\n                        <li key={index}>\n                          <ImageGalleryItem\n                              webformatURL={webformatURL}\n                              largeImageURL={largeImageURL}\n                              tags={tags}\n                              clickOnItem={() => this.handleGalleryItemClick(largeImageURL, tags)} />\n                        </li>))}\n                    </ul>)}\n                \n            {loading && <Spinner/>}\n                                \n            {showModal &&\n                (<Modal\n                        image={largeImage}\n                        onClose={this.toggleModal}\n                    />)}\n                            \n            {page - 1 < numberOfPages && !loading && (<Button onIncrement={() => this.handleButtonClick()} />)}\n        </>\n        )    \n    }\n}\n            \n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Layout from './components/Layout/Layout';\nimport Searchbar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\n\nexport default class App extends Component {\n\n    state = {\n        query: '',\n    };\n\n    handleFormSubmit = query => {\n        this.setState({ query });\n    };\n\n    render() {\n\n        return (\n            <Layout>\n                <Searchbar onSubmit={this.handleFormSubmit} />\n                <ImageGallery query={this.state.query} />\n                <ToastContainer />\n            </Layout>\n        );\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport  './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n    <App />, document.querySelector('#root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__EZgCP\",\"SearchForm\":\"Searchbar_SearchForm__-mP3a\",\"SearchFormButton\":\"Searchbar_SearchFormButton__14Nss\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__1Cnt9\",\"SearchFormInput\":\"Searchbar_SearchFormInput__17G0O\"};"],"sourceRoot":""}